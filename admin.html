<!DOCTYPE html>
<html>
<head>
  <title>Admin - Share Screen</title>
</head>
<body>
  <h2>Admin - Share Your Screen</h2>
  <button onclick="startSharing()">Start Sharing</button>
  <video id="localVideo" autoplay playsinline></video>

  <script type="module">
    import { db } from "./firebase.js";
    import { ref, set } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    async function startSharing() {
      const stream = await navigator.mediaDevices.getDisplayMedia({ video: true, audio: true });
      document.getElementById("localVideo").srcObject = stream;

      // Save a "flag" in Firebase so users know sharing started
      await set(ref(db, "status"), { sharing: true, startedAt: Date.now() });
    }
    window.startSharing = startSharing;
  </script>
</body>
</html>
